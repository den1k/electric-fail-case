shadow$provide.module$node_modules$vega_encode$build$vega_encode=function(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){"object"===typeof exports$jscomp$0&&"undefined"!==typeof module?factory(exports$jscomp$0,require("module$node_modules$vega_dataflow$build$vega_dataflow"),require("module$node_modules$vega_scale$build$vega_scale"),require("module$node_modules$vega_util$build$vega_util")):"function"===typeof define&&define.amd?define(["exports","vega-dataflow","vega-scale",
"vega-util"],factory):(global="undefined"!==typeof globalThis?globalThis:global||self,factory(global.vega={},global.vega,global.vega,global.vega))})(this,function(exports,vegaDataflow,vegaScale,vegaUtil){function AxisTicks(params){vegaDataflow.Transform.call(this,null,params)}function DataJoin(params){vegaDataflow.Transform.call(this,null,params)}function defaultItemCreate(){return vegaDataflow.ingest({})}function newMap(key){const map=vegaUtil.fastmap().test(t=>t.exit);map.lookup=t=>map.get(key(t));
return map}function Encode(params){vegaDataflow.Transform.call(this,null,params)}function LegendEntries(params){vegaDataflow.Transform.call(this,[],params)}function LinkPath(params){vegaDataflow.Transform.call(this,{},params)}function range$jscomp$0(start,stop,step){start=+start;stop=+stop;step=2>(n=arguments.length)?(stop=start,start=0,1):3>n?1:+step;for(var i=-1,n=Math.max(0,Math.ceil((stop-start)/step))|0,range=Array(n);++i<n;)range[i]=start+i*step;return range}function sum$jscomp$0(values,valueof){let sum=
0;if(void 0===valueof)for(var value$jscomp$0 of values){if(value$jscomp$0=+value$jscomp$0)sum+=value$jscomp$0}else{value$jscomp$0=-1;for(let value of values)if(value=+valueof(value,++value$jscomp$0,values))sum+=value}return sum}function Pie(params){vegaDataflow.Transform.call(this,null,params)}function define(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype;prototype.constructor=constructor}function extend(parent,definition){parent=Object.create(parent.prototype);for(var key in definition)parent[key]=
definition[key];return parent}function Color(){}function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color$jscomp$0(format){var m,l;format=(format+"").trim().toLowerCase();return(m=reHex.exec(format))?(l=m[1].length,m=parseInt(m[1],16),6===l?rgbn(m):3===l?new Rgb(m>>8&15|m>>4&240,m>>4&15|m&240,(m&15)<<4|m&15,1):8===l?rgba(m>>24&255,m>>16&255,m>>8&255,(m&255)/255):4===l?rgba(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|m&240,((m&15)<<
4|m&15)/255):null):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,
NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,n&255,1)}function rgba(r,g,b,a){0>=a&&(r=g=b=NaN);return new Rgb(r,g,b,a)}function rgb$1(r,g,b,opacity){if(1===arguments.length){var JSCompiler_temp=r;JSCompiler_temp instanceof Color||(JSCompiler_temp=color$jscomp$0(JSCompiler_temp));JSCompiler_temp?(JSCompiler_temp=JSCompiler_temp.rgb(),JSCompiler_temp=new Rgb(JSCompiler_temp.r,JSCompiler_temp.g,JSCompiler_temp.b,JSCompiler_temp.opacity)):JSCompiler_temp=new Rgb}else JSCompiler_temp=
new Rgb(r,g,b,null==opacity?1:opacity);return JSCompiler_temp}function Rgb(r,g,b,opacity){this.r=+r;this.g=+g;this.b=+b;this.opacity=+opacity}function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(1===a?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}
function hex(value){value=Math.max(0,Math.min(255,Math.round(value)||0));return(16>value?"0":"")+value.toString(16)}function hsla(h,s,l,a){0>=a?h=s=l=NaN:0>=l||1<=l?h=s=NaN:0>=s&&(h=NaN);return new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);o instanceof Color||(o=color$jscomp$0(o));if(!o)return new Hsl;if(o instanceof Hsl)return o;o=o.rgb();var r=o.r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;s?(h=
r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=.5>l?max+min:2-max-min,h*=60):s=0<l&&1>l?0:h;return new Hsl(h,s,l,o.opacity)}function Hsl(h,s,l,opacity){this.h=+h;this.s=+s;this.l=+l;this.opacity=+opacity}function hsl2rgb(h,m1,m2){return 255*(60>h?m1+(m2-m1)*h/60:180>h?m2:240>h?m1+(m2-m1)*(240-h)/60:m1)}function linear(a,d){return function(t){return a+t*d}}function exponential(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}function gamma(y){return 1===
(y=+y)?nogamma:function(a,b){return b-a?exponential(a,b,y):constant$jscomp$0(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?linear(a,d):constant$jscomp$0(isNaN(a)?b:a)}function numberArray(a,b){b||(b=[]);var n=a?Math.min(b.length,a.length):0,c=b.slice(),i;return function(t){for(i=0;i<n;++i)c[i]=a[i]*(1-t)+b[i]*t;return c}}function genericArray(a,b){var nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=Array(na),c=Array(nb),i;for(i=0;i<na;++i)x[i]=interpolate(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];
return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}function date(a,b){var d=new Date;return a=+a,b=+b,function(t){return d.setTime(a*(1-t)+b*t),d}}function number(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}function object(a,b){var i={},c={},k;if(null===a||"object"!==typeof a)a={};if(null===b||"object"!==typeof b)b={};for(k in b)k in a?i[k]=interpolate(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}}function zero(b){return function(){return b}}function one(b){return function(t){return b(t)+
""}}function string(a,b){var bi=reA.lastIndex=reB.lastIndex=0,am,bm,bs,i$jscomp$0=-1,s=[],q=[];a+="";for(b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i$jscomp$0]?s[i$jscomp$0]+=bs:s[++i$jscomp$0]=bs),(am=am[0])===(bm=bm[0])?s[i$jscomp$0]?s[i$jscomp$0]+=bm:s[++i$jscomp$0]=bm:(s[++i$jscomp$0]=null,q.push({i:i$jscomp$0,x:number(am,bm)})),bi=reB.lastIndex;bi<b.length&&(bs=b.slice(bi),s[i$jscomp$0]?s[i$jscomp$0]+=bs:s[++i$jscomp$0]=bs);return 2>s.length?q[0]?one(q[0].x):
zero(b):(b=q.length,function(t){for(var i=0,o;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}function interpolate(a,b){var t=typeof b;if(null==b||"boolean"===t)a=constant$jscomp$0(b);else{if("number"===t)var c=number;else"string"===t?t=(c=color$jscomp$0(b))?(b=c,rgb$jscomp$0):string:(b instanceof color$jscomp$0?c=rgb$jscomp$0:b instanceof Date?c=date:(c=b,c=!ArrayBuffer.isView(c)||c instanceof DataView?Array.isArray(b)?genericArray:"function"!==typeof b.valueOf&&"function"!==typeof b.toString||
isNaN(b)?object:number:numberArray),t=c),c=t;a=c(a,b)}return a}function interpolateRound(a,b){return a=+a,b=+b,function(t){return Math.round(a*(1-t)+b*t)}}function includePad(type){return vegaScale.isContinuous(type)&&type!==vegaScale.Sequential}function Scale(params){vegaDataflow.Transform.call(this,null,params);this.modified(!0)}function domainCheck(type,domain,df){vegaScale.isLogarithmic(type)&&Math.abs(domain.reduce((s,v)=>s+(0>v?-1:0<v?1:0),0))!==domain.length&&df.warn("Log scale domain includes zero: "+
vegaUtil.stringValue(domain));return domain}function adjustScheme(scheme,extent,reverse){return vegaUtil.isFunction(scheme)&&(extent||reverse)?vegaScale.interpolateRange(scheme,flip(extent||[0,1],reverse)):scheme}function flip(array,reverse){return reverse?array.slice().reverse():array}function SortItems(params){vegaDataflow.Transform.call(this,null,params)}function Stack(params){vegaDataflow.Transform.call(this,null,params)}function stackCenter(group,max,field,y0,y1){max=(max-group.sum)/2;for(var m=
group.length,j=0,t;j<m;++j)t=group[j],t[y0]=max,t[y1]=max+=Math.abs(field(t))}function stackNormalize(group,max,field,y0,y1){max=1/group.sum;for(var last=0,m=group.length,j=0,v=0,t;j<m;++j)t=group[j],t[y0]=last,t[y1]=last=max*(v+=Math.abs(field(t)))}function stackZero(group,max,field,y0,y1){for(var lastNeg=max=0,m=group.length,j=0,v,t;j<m;++j)t=group[j],v=+field(t),0>v?(t[y0]=lastNeg,t[y1]=lastNeg+=v):(t[y0]=max,t[y1]=max+=v)}function partition(data,groupby,sort,field){var groups=[],get=f=>f(t),n;
if(null==groupby)groups.push(data.slice());else{var map={};var i=0;for(n=data.length;i<n;++i){var t=data[i];var k=groupby.map(get);var g=map[k];g||(map[k]=g=[],groups.push(g));g.push(t)}}get=k=0;for(data=groups.length;k<data;++k){g=groups[k];groupby=i=0;for(n=g.length;i<n;++i)groupby+=Math.abs(field(g[i]));g.sum=groupby;groupby>get&&(get=groupby);sort&&g.sort(sort)}groups.max=get;return groups}vegaUtil.inherits(AxisTicks,vegaDataflow.Transform,{transform(_,pulse){if(this.value&&!_.modified())return pulse.StopPropagation;
var locale=pulse.dataflow.locale();pulse=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);var ticks=this.value,scale=_.scale,count=vegaScale.tickCount(scale,null==_.count?_.values?_.values.length:10:_.count,_.minstep),format=_.format||vegaScale.tickFormat(locale,scale,count,_.formatSpecifier,_.formatType,!!_.values),values=_.values?vegaScale.validTicks(scale,_.values,count):vegaScale.tickValues(scale,count);ticks&&(pulse.rem=ticks);ticks=values.map((value,i)=>vegaDataflow.ingest({index:i/(values.length-
1||1),value,label:format(value)}));_.extra&&ticks.length&&ticks.push(vegaDataflow.ingest({index:-1,extra:{value:ticks[0].value},label:""}));pulse.source=ticks;this.value=pulse.add=ticks;return pulse}});vegaUtil.inherits(DataJoin,vegaDataflow.Transform,{transform(_,pulse){var df=pulse.dataflow,out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),item=_.item||defaultItemCreate,key=_.key||vegaDataflow.tupleid,map=this.value;vegaUtil.isArray(out.encode)&&(out.encode=null);map&&(_.modified("key")||pulse.modified(key))&&
vegaUtil.error("DataJoin does not support modified key function or fields.");map||(pulse=pulse.addAll(),this.value=map=newMap(key));pulse.visit(pulse.ADD,t=>{const k=key(t);let x=map.get(k);x?x.exit?(map.empty--,out.add.push(x)):out.mod.push(x):(x=item(t),map.set(k,x),out.add.push(x));x.datum=t;x.exit=!1});pulse.visit(pulse.MOD,t=>{var k=key(t);if(k=map.get(k))k.datum=t,out.mod.push(k)});pulse.visit(pulse.REM,t=>{var k=key(t);k=map.get(k);t!==k.datum||k.exit||(out.rem.push(k),k.exit=!0,++map.empty)});
pulse.changed(pulse.ADD_MOD)&&out.modifies("datum");(pulse.clean()||_.clean&&map.empty>df.cleanThreshold)&&df.runAfter(map.clean);return out}});vegaUtil.inherits(Encode,vegaDataflow.Transform,{transform(_,pulse){var out=pulse.fork(pulse.ADD_REM),fmod=_.mod||!1,encoders=_.encoders,encode=pulse.encode;if(vegaUtil.isArray(encode))if(out.changed()||encode.every(e=>encoders[e]))encode=encode[0],out.encode=null;else return pulse.StopPropagation;var reenter="enter"===encode,update=encoders.update||vegaUtil.falsy,
enter=encoders.enter||vegaUtil.falsy,exit=encoders.exit||vegaUtil.falsy,set=(encode&&!reenter?encoders[encode]:update)||vegaUtil.falsy;pulse.changed(pulse.ADD)&&(pulse.visit(pulse.ADD,t=>{enter(t,_);update(t,_)}),out.modifies(enter.output),out.modifies(update.output),set!==vegaUtil.falsy&&set!==update&&(pulse.visit(pulse.ADD,t=>{set(t,_)}),out.modifies(set.output)));pulse.changed(pulse.REM)&&exit!==vegaUtil.falsy&&(pulse.visit(pulse.REM,t=>{exit(t,_)}),out.modifies(exit.output));if(reenter||set!==
vegaUtil.falsy)encode=pulse.MOD|(_.modified()?pulse.REFLOW:0),reenter?(pulse.visit(encode,t=>{const mod=enter(t,_)||fmod;(set(t,_)||mod)&&out.mod.push(t)}),out.mod.length&&out.modifies(enter.output)):pulse.visit(encode,t=>{(set(t,_)||fmod)&&out.mod.push(t)}),out.mod.length&&out.modifies(set.output);return out.changed()?out:pulse.StopPropagation}});vegaUtil.inherits(LegendEntries,vegaDataflow.Transform,{transform(_,pulse){if(null!=this.value&&!_.modified())return pulse.StopPropagation;var locale=pulse.dataflow.locale(),
out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),items=this.value,type=_.type||vegaScale.SymbolLegend,scale=_.scale,limit=+_.limit,count=vegaScale.tickCount(scale,null==_.count?5:_.count,_.minstep),lskip=!!_.values||type===vegaScale.SymbolLegend,format=_.format||vegaScale.labelFormat(locale,scale,count,type,_.formatSpecifier,_.formatType,lskip),values=_.values||vegaScale.labelValues(scale,count),size;items&&(out.rem=items);if(type===vegaScale.SymbolLegend){if(limit&&values.length>limit){pulse.dataflow.warn("Symbol legend count exceeds limit, filtering items.");
items=values.slice(0,limit-1);var ellipsis=!0}else items=values;if(vegaUtil.isFunction(size=_.size)){_.values||0!==scale(items[0])||(items=items.slice(1));var offset=items.reduce((max,value)=>Math.max(max,size(value,_)),0)}else size=vegaUtil.constant(offset=size||8);items=items.map((value,index)=>vegaDataflow.ingest({index,label:format(value,index,items),value,offset,size:size(value,_)}));ellipsis&&(ellipsis=values[items.length],items.push(vegaDataflow.ingest({index:items.length,label:`\u2026${values.length-
items.length} entries`,value:ellipsis,offset,size:size(ellipsis,_)})))}else if(type===vegaScale.GradientLegend){pulse=scale.domain();var fraction=vegaScale.scaleFraction(scale,pulse[0],vegaUtil.peek(pulse));3>values.length&&!_.values&&pulse[0]!==vegaUtil.peek(pulse)&&(values=[pulse[0],vegaUtil.peek(pulse)]);items=values.map((value,index)=>vegaDataflow.ingest({index,label:format(value,index,values),value,perc:fraction(value)}))}else size=values.length-1,fraction=vegaScale.labelFraction(scale),items=
values.map((value,index)=>vegaDataflow.ingest({index,label:format(value,index,values),value,perc:index?fraction(value):0,perc2:index===size?1:fraction(values[index+1])}));out.source=items;this.value=out.add=items;return out}});const sourceX=t=>t.source.x,sourceY=t=>t.source.y,targetX=t=>t.target.x,targetY=t=>t.target.y;LinkPath.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field","default":"source.x"},{name:"sourceY",type:"field","default":"source.y"},{name:"targetX",
type:"field","default":"target.x"},{name:"targetY",type:"field","default":"target.y"},{name:"orient",type:"enum","default":"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum","default":"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string","default":"path"}]};vegaUtil.inherits(LinkPath,vegaDataflow.Transform,{transform(_,pulse){var sx=_.sourceX||sourceX,sy=_.sourceY||sourceY,tx=_.targetX||targetX,ty=_.targetY||
targetY,as=_.as||"path",shape=_.shape||"line",path=Paths.get(shape+"-"+(_.orient||"vertical"))||Paths.get(shape);path||vegaUtil.error("LinkPath unsupported type: "+_.shape+(_.orient?"-"+_.orient:""));pulse.visit(pulse.SOURCE,t=>{t[as]=path(sx(t),sy(t),tx(t),ty(t))});return pulse.reflow(_.modified()).modifies(as)}});const line=(sx,sy,tx,ty)=>"M"+sx+","+sy+"L"+tx+","+ty,arc=(sx,sy,tx,ty)=>{var dx=tx-sx,dy=ty-sy,rr=Math.sqrt(dx*dx+dy*dy)/2;return"M"+sx+","+sy+"A"+rr+","+rr+" "+180*Math.atan2(dy,dx)/
Math.PI+" 0 1 "+tx+","+ty},curve=(sx,sy,tx,ty)=>{var dx=tx-sx;const dy=ty-sy,ix=.2*(dx+dy);dx=.2*(dy-dx);return"M"+sx+","+sy+"C"+(sx+ix)+","+(sy+dx)+" "+(tx+dx)+","+(ty-ix)+" "+tx+","+ty},Paths=vegaUtil.fastmap({line,"line-radial":(sa,sr,ta,tr)=>line(sr*Math.cos(sa),sr*Math.sin(sa),tr*Math.cos(ta),tr*Math.sin(ta)),arc,"arc-radial":(sa,sr,ta,tr)=>arc(sr*Math.cos(sa),sr*Math.sin(sa),tr*Math.cos(ta),tr*Math.sin(ta)),curve,"curve-radial":(sa,sr,ta,tr)=>curve(sr*Math.cos(sa),sr*Math.sin(sa),tr*Math.cos(ta),
tr*Math.sin(ta)),"orthogonal-horizontal":(sx,sy,tx,ty)=>"M"+sx+","+sy+"V"+ty+"H"+tx,"orthogonal-vertical":(sx,sy,tx,ty)=>"M"+sx+","+sy+"H"+tx+"V"+ty,"orthogonal-radial":(sa,sr,ta,tr)=>{const tc=Math.cos(ta),ts=Math.sin(ta);return"M"+sr*Math.cos(sa)+","+sr*Math.sin(sa)+"A"+sr+","+sr+" 0 0,"+((Math.abs(ta-sa)>Math.PI?ta<=sa:ta>sa)?1:0)+" "+sr*tc+","+sr*ts+"L"+tr*tc+","+tr*ts},"diagonal-horizontal":(sx,sy,tx,ty)=>{const m=(sx+tx)/2;return"M"+sx+","+sy+"C"+m+","+sy+" "+m+","+ty+" "+tx+","+ty},"diagonal-vertical":(sx,
sy,tx,ty)=>{const m=(sy+ty)/2;return"M"+sx+","+sy+"C"+sx+","+m+" "+tx+","+m+" "+tx+","+ty},"diagonal-radial":(sa,sr,ta,tr)=>{const sc=Math.cos(sa);sa=Math.sin(sa);const tc=Math.cos(ta);ta=Math.sin(ta);const mr=(sr+tr)/2;return"M"+sr*sc+","+sr*sa+"C"+mr*sc+","+mr*sa+" "+mr*tc+","+mr*ta+" "+tr*tc+","+tr*ta}});Pie.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number","default":0},{name:"endAngle",type:"number","default":6.283185307179586},
{name:"sort",type:"boolean","default":!1},{name:"as",type:"string",array:!0,length:2,"default":["startAngle","endAngle"]}]};vegaUtil.inherits(Pie,vegaDataflow.Transform,{transform(_,pulse){var as=_.as||["startAngle","endAngle"],startAngle=as[0],endAngle=as[1],start=_.startAngle||0,stop=null!=_.endAngle?_.endAngle:2*Math.PI,data=pulse.source,values=data.map(_.field||vegaUtil.one),n=values.length,a$jscomp$0=start;start=(stop-start)/sum$jscomp$0(values);stop=range$jscomp$0(n);var i;_.sort&&stop.sort((a,
b)=>values[a]-values[b]);for(i=0;i<n;++i){var v=values[stop[i]];var t=data[stop[i]];t[startAngle]=a$jscomp$0;t[endAngle]=a$jscomp$0+=v*start}this.value=values;return pulse.reflow(_.modified()).modifies(as)}});var brighter=1/.7,reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=RegExp("^rgb\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*\\)$"),reRgbPercent=RegExp("^rgb\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),
reRgbaInteger=RegExp("^rgba\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),reRgbaPercent=RegExp("^rgba\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),reHslPercent=RegExp("^hsl\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),
reHslaPercent=RegExp("^hsla\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,
cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,
dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,
lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,
mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,
seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color$jscomp$0,{copy:function(channels){return Object.assign(new this.constructor,this,channels)},displayable:function(){return this.rgb().displayable()},
hex:color_formatHex,formatHex:color_formatHex,formatHsl:function(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb});define(Rgb,rgb$1,extend(Color,{brighter:function(k){k=null==k?brighter:Math.pow(brighter,k);return new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function(k){k=null==k?.7:Math.pow(.7,k);return new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&
255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));define(Hsl,function(h,s,l,opacity){return 1===arguments.length?hslConvert(h):new Hsl(h,s,l,null==opacity?1:opacity)},extend(Color,{brighter:function(k){k=null==k?brighter:Math.pow(brighter,k);return new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function(k){k=null==k?.7:Math.pow(.7,k);return new Hsl(this.h,this.s,this.l*k,this.opacity)},
rgb:function(){var h=this.h%360+360*(0>this.h),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l;s=l+(.5>l?l:1-l)*s;l=2*l-s;return new Rgb(hsl2rgb(240<=h?h-240:h+120,l,s),hsl2rgb(h,l,s),hsl2rgb(120>h?h+240:h-120,l,s),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(1===a?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*
(this.l||0)+"%"+(1===a?")":", "+a+")")}}));var constant$jscomp$0=x=>()=>x,rgb$jscomp$0=function rgbGamma(y){function rgb(start,end){var r=color((start=rgb$1(start)).r,(end=rgb$1(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){start.r=r(t);start.g=g(t);start.b=b(t);start.opacity=opacity(t);return start+""}}var color=gamma(y);rgb.gamma=rgbGamma;return rgb}(1),reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,
"g");const SKIP=vegaUtil.toSet("set modified clear type scheme schemeExtent schemeCount domain domainMin domainMid domainMax domainRaw domainImplicit nice zero bins range rangeStep round reverse interpolate interpolateGamma".split(" "));vegaUtil.inherits(Scale,vegaDataflow.Transform,{transform(_,pulse){var df=pulse.dataflow,scale=this.value;var key=_.type;var d="";if(key===vegaScale.Sequential)key=vegaScale.Sequential+"-"+vegaScale.Linear;else{var t=_.type;vegaScale.isContinuous(t)&&t!==vegaScale.Time&&
t!==vegaScale.UTC&&(_.scheme||_.range&&_.range.length&&_.range.every(vegaUtil.isString))&&(d=_.rawDomain?_.rawDomain.length:_.domain?_.domain.length+ +(null!=_.domainMid):0,d=2===d?vegaScale.Sequential+"-":3===d?vegaScale.Diverging+"-":"");key=(d+key||vegaScale.Linear).toLowerCase()}scale&&key===scale.type||(this.value=scale=vegaScale.scale(key)());for(key in _)SKIP[key]||"padding"===key&&includePad(scale.type)||(vegaUtil.isFunction(scale[key])?scale[key](_[key]):df.warn("Unsupported scale property: "+
key));d=key=scale;(t=_.domainRaw)?(scale.domain(domainCheck(scale.type,t,df)),t=t.length):t=-1;if(-1<t)df=t;else{var domain=_.domain;t=scale.type;var JSCompiler_temp;!(JSCompiler_temp=_.zero)&&(JSCompiler_temp=void 0===_.zero)&&(JSCompiler_temp=scale.type,JSCompiler_temp=!scale.bins&&(JSCompiler_temp===vegaScale.Linear||JSCompiler_temp===vegaScale.Pow||JSCompiler_temp===vegaScale.Sqrt));if(domain){if(includePad(t)&&_.padding&&domain[0]!==vegaUtil.peek(domain)){var range=_.range,pad=_.padding;var n=
_.exponent;var constant=_.constant;range=Math.abs(vegaUtil.peek(range)-range[0]);pad=range/(range-2*pad);n=t===vegaScale.Log?vegaUtil.zoomLog(domain,null,pad):t===vegaScale.Sqrt?vegaUtil.zoomPow(domain,null,pad,.5):t===vegaScale.Pow?vegaUtil.zoomPow(domain,null,pad,n||1):t===vegaScale.Symlog?vegaUtil.zoomSymlog(domain,null,pad,constant||1):vegaUtil.zoomLinear(domain,null,pad);domain=domain.slice();domain[0]=n[0];domain[domain.length-1]=n[1]}if(JSCompiler_temp||null!=_.domainMin||null!=_.domainMax||
null!=_.domainMid)n=(domain=domain.slice()).length-1||1,JSCompiler_temp&&(0<domain[0]&&(domain[0]=0),0>domain[n]&&(domain[n]=0)),null!=_.domainMin&&(domain[0]=_.domainMin),null!=_.domainMax&&(domain[n]=_.domainMax),null!=_.domainMid&&(JSCompiler_temp=_.domainMid,constant=JSCompiler_temp>domain[n]?n+1:JSCompiler_temp<domain[0]?0:n,constant!==n&&df.warn("Scale domainMid exceeds domain min or max.",JSCompiler_temp),domain.splice(constant,0,JSCompiler_temp));scale.domain(domainCheck(t,domain,df));t===
vegaScale.Ordinal&&scale.unknown(_.domainImplicit?vegaScale.scaleImplicit:void 0);_.nice&&scale.nice&&scale.nice(!0!==_.nice&&vegaScale.tickCount(scale,_.nice)||null);df=domain.length}else df=0}(t=_.bins)&&!vegaUtil.isArray(t)&&(JSCompiler_temp=d.domain(),scale=JSCompiler_temp[0],JSCompiler_temp=vegaUtil.peek(JSCompiler_temp),domain=t.step,n=null==t.start?scale:t.start,t=null==t.stop?JSCompiler_temp:t.stop,domain||vegaUtil.error("Scale bins parameter missing step property."),n<scale&&(n=domain*Math.ceil(scale/
domain)),t>JSCompiler_temp&&(t=domain*Math.floor(JSCompiler_temp/domain)),t=range$jscomp$0(n,t+domain/2,domain));t?d.bins=t:d.bins&&delete d.bins;d.type===vegaScale.BinOrdinal&&(t?_.domain||_.domainRaw||(d.domain(t),df=t.length):d.bins=d.domain());scale=df;a:{d=key.type;df=_.round||!1;t=_.range;if(null!=_.rangeStep)d!==vegaScale.Band&&d!==vegaScale.Point&&vegaUtil.error("Only band and point scales support rangeStep."),t=[0,_.rangeStep*vegaScale.bandSpace(scale,d===vegaScale.Point?1:(null!=_.paddingInner?
_.paddingInner:_.padding)||0,(null!=_.paddingOuter?_.paddingOuter:_.padding)||0)];else if(_.scheme&&(t=_.schemeExtent,vegaUtil.isArray(_.scheme)?JSCompiler_temp=vegaScale.interpolateColors(_.scheme,_.interpolate,_.interpolateGamma):(JSCompiler_temp=_.scheme.toLowerCase(),(JSCompiler_temp=vegaScale.scheme(JSCompiler_temp))||vegaUtil.error(`Unrecognized scheme name: ${_.scheme}`)),scale=d===vegaScale.Threshold?scale+1:d===vegaScale.BinOrdinal?scale-1:d===vegaScale.Quantile||d===vegaScale.Quantize?+_.schemeCount||
5:scale,t=vegaScale.isInterpolating(d)?adjustScheme(JSCompiler_temp,t,_.reverse):vegaUtil.isFunction(JSCompiler_temp)?vegaScale.quantizeInterpolator(adjustScheme(JSCompiler_temp,t),scale):d===vegaScale.Ordinal?JSCompiler_temp:JSCompiler_temp.slice(0,scale),vegaUtil.isFunction(t)))if(key.interpolator){key.interpolator(t);break a}else vegaUtil.error(`Scale type ${d} does not support interpolating color schemes.`);t&&vegaScale.isInterpolating(d)?key.interpolator(vegaScale.interpolateColors(flip(t,_.reverse),
_.interpolate,_.interpolateGamma)):(t&&_.interpolate&&key.interpolate?key.interpolate(vegaScale.interpolate(_.interpolate,_.interpolateGamma)):vegaUtil.isFunction(key.round)?key.round(df):vegaUtil.isFunction(key.rangeRound)&&key.interpolate(df?interpolateRound:interpolate),t&&key.range(flip(t,_.reverse)))}return pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS)}});vegaUtil.inherits(SortItems,vegaDataflow.Transform,{transform(_,pulse){const mod=_.modified("sort")||pulse.changed(pulse.ADD)||pulse.modified(_.sort.fields)||
pulse.modified("datum");mod&&pulse.source.sort(vegaDataflow.stableCompare(_.sort));this.modified(mod);return pulse}});const DefOutput=["y0","y1"];Stack.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum","default":"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,"default":DefOutput}]};vegaUtil.inherits(Stack,vegaDataflow.Transform,{transform(_,
pulse){var as=_.as||DefOutput,y0=as[0],y1=as[1],sort=vegaDataflow.stableCompare(_.sort),field=_.field||vegaUtil.one,stack="center"===_.offset?stackCenter:"normalize"===_.offset?stackNormalize:stackZero,max;sort=partition(pulse.source,_.groupby,sort,field);var i=0;var n=sort.length;for(max=sort.max;i<n;++i)stack(sort[i],max,field,y0,y1);return pulse.reflow(_.modified()).modifies(as)}});exports.axisticks=AxisTicks;exports.datajoin=DataJoin;exports.encode=Encode;exports.legendentries=LegendEntries;exports.linkpath=
LinkPath;exports.pie=Pie;exports.scale=Scale;exports.sortitems=SortItems;exports.stack=Stack;Object.defineProperty(exports,"__esModule",{value:!0})})}
//# sourceMappingURL=module$node_modules$vega_encode$build$vega_encode.js.map
