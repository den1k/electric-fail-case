shadow$provide.module$node_modules$vega_time$build$vega_time=function(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){"object"===typeof exports$jscomp$0&&"undefined"!==typeof module?factory(exports$jscomp$0,require("module$node_modules$vega_util$build$vega_util")):"function"===typeof define&&define.amd?define(["exports","vega-util"],factory):(global="undefined"!==typeof globalThis?globalThis:global||self,factory(global.vega={},global.vega))})(this,function(exports,vegaUtil){function timeUnits(units){const u=
vegaUtil.array(units).slice(),m={};u.length||vegaUtil.error("Missing time unit.");u.forEach(unit=>{vegaUtil.hasOwnProperty(UNITS,unit)?m[unit]=1:vegaUtil.error(`Invalid time unit: ${unit}.`)});1<(m.week||m.day?1:0)+(m.quarter||m.month||m.date?1:0)+(m.dayofyear?1:0)&&vegaUtil.error(`Incompatible time units: ${units}`);u.sort((a,b)=>UNITS[a]-UNITS[b]);return u}function newInterval(floori,offseti,count,field){function interval(date){return floori(date=0===arguments.length?new Date:new Date(+date)),date}
interval.floor=function(date){return floori(date=new Date(+date)),date};interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),floori(date),date};interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);return date-d0<d1-date?d0:d1};interval.offset=function(date,step){return offseti(date=new Date(+date),null==step?1:Math.floor(step)),date};interval.range=function(start,stop,step){var range=[],previous;start=interval.ceil(start);step=null==step?1:Math.floor(step);
if(!(start<stop&&0<step))return range;do range.push(previous=new Date(+start)),offseti(start,step),floori(start);while(previous<start&&start<stop);return range};interval.filter=function(test){return newInterval(function(date){if(date>=date)for(;floori(date),!test(date);)date.setTime(date-1)},function(date,step){if(date>=date)if(0>step)for(;0>=++step;)for(;offseti(date,-1),!test(date););else for(;0<=--step;)for(;offseti(date,1),!test(date););})};count&&(interval.count=function(start,end){t0$1.setTime(+start);
t1.setTime(+end);floori(t0$1);floori(t1);return Math.floor(count(t0$1,t1))},interval.every=function(step){step=Math.floor(step);return isFinite(step)&&0<step?1<step?interval.filter(field?function(d){return 0===field(d)%step}:function(d){return 0===interval.count(0,d)%step}):interval:null});return interval}function weekday$1(i){return newInterval(function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7);date.setHours(0,0,0,0)},function(date,step){date.setDate(date.getDate()+7*step)},function(start,
end){return(end-start-6E4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/durationWeek$1})}function utcWeekday(i){return newInterval(function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+7*step)},function(start,end){return(end-start)/durationWeek$1})}function ascending(a,b){return null==a||null==b?NaN:a<b?-1:a>b?1:a>=b?0:NaN}function bisector(f){function left(a,x,lo=0,hi=a.length){if(lo<hi){if(0!==
compare1(x,x))return hi;do{const mid=lo+hi>>>1;0>compare2(a[mid],x)?lo=mid+1:hi=mid}while(lo<hi)}return lo}let delta=f,compare1=f,compare2=f;2!==f.length&&(delta=(d,x)=>f(d)-x,compare1=ascending,compare2=(d,x)=>ascending(f(d),x));return{left,center:function(a,x,lo=0,hi=a.length){hi=left(a,x,lo,hi-1);return hi>lo&&delta(a[hi-1],x)>-delta(a[hi],x)?hi-1:hi},right:function(a,x,lo=0,hi=a.length){if(lo<hi){if(0!==compare1(x,x))return hi;do{const mid=lo+hi>>>1;0>=compare2(a[mid],x)?lo=mid+1:hi=mid}while(lo<
hi)}return lo}}}function tickStep(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count);count=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10));step0/=count;step0>=e10?count*=10:step0>=e5?count*=5:step0>=e2&&(count*=2);return stop<start?-count:count}function localYear(y){t0.setFullYear(y);t0.setMonth(0);t0.setDate(1);t0.setHours(0,0,0,0);return t0}function localDayOfYear(d){return timeDay.count(localYear(d.getFullYear())-1,d)}function localWeekNum(d){return sunday.count(localYear(d.getFullYear())-
1,d)}function localDate(y,m,d,H,M,S,L){return 0<=y&&100>y?(m=new Date(-1,m,d,H,M,S,L),m.setFullYear(y),m):new Date(y,m,d,H,M,S,L)}function utcDayOfYear(d){const y=Date.UTC(d.getUTCFullYear(),0,1);return utcDay$1.count(y-1,d)}function utcWeekNum(d){const y=Date.UTC(d.getUTCFullYear(),0,1);return utcSunday.count(y-1,d)}function utcFirst(y){t0.setTime(Date.UTC(y,0,1));return t0.getUTCDay()}function utcDate(y,m,d,H,M,S,L){return 0<=y&&100>y?(y=new Date(Date.UTC(-1,m,d,H,M,S,L)),y.setUTCFullYear(d.y),
y):new Date(Date.UTC(y,m,d,H,M,S,L))}function floor(units,step,get,inv,newDate){const s=step||1,b=vegaUtil.peek(units);step=(unit,p,key)=>{key=key||unit;return getUnit(get[key],inv[key],unit===b&&s,p)};const t=new Date;units=vegaUtil.toSet(units);const y=units.year?step("year"):vegaUtil.constant(2012),m=units.month?step("month"):units.quarter?step("quarter"):vegaUtil.zero,d=units.week&&units.day?step("day",1,"weekday"):units.week?step("week",1):units.day?step("day",1):units.date?step("date",1):units.dayofyear?
step("dayofyear",1):vegaUtil.one,H=units.hours?step("hours"):vegaUtil.zero,M=units.minutes?step("minutes"):vegaUtil.zero,S=units.seconds?step("seconds"):vegaUtil.zero,L=units.milliseconds?step("milliseconds"):vegaUtil.zero;return function(v){t.setTime(+v);v=y(t);return newDate(v,m(t),d(t,v),H(t),M(t),S(t),L(t))}}function getUnit(f,inv,step,phase){const u=1>=step?f:phase?(d,y)=>phase+step*Math.floor((f(d,y)-phase)/step):(d,y)=>step*Math.floor(f(d,y)/step);return inv?(d,y)=>inv(u(d,y),y):u}function weekday(week,
day,firstDay){return day+7*week-(firstDay+6)%7}const TIME_UNITS="year quarter month week date day dayofyear hours minutes seconds milliseconds".split(" "),UNITS=TIME_UNITS.reduce((o,u,i)=>(o[u]=1+i,o),{}),defaultSpecifiers={year:"%Y ",quarter:"Q%q ",month:"%b ",date:"%d ",week:"W%U ",day:"%a ",dayofyear:"%j ",hours:"%H:00",minutes:"00:%M",seconds:":%S",milliseconds:".%L",["year-month"]:"%Y-%m ",["year-month-date"]:"%Y-%m-%d ",["hours-minutes"]:"%H:%M"};var t0$1=new Date,t1=new Date,millisecond=newInterval(function(){},
function(date,step){date.setTime(+date+step)},function(start,end){return end-start});millisecond.every=function(k){k=Math.floor(k);return isFinite(k)&&0<k?1<k?newInterval(function(date){date.setTime(Math.floor(date/k)*k)},function(date,step){date.setTime(+date+step*k)},function(start,end){return(end-start)/k}):millisecond:null};const durationWeek$1=6048E5;var utcSecond=newInterval(function(date){date.setTime(date-date.getMilliseconds())},function(date,step){date.setTime(+date+1E3*step)},function(start,
end){return(end-start)/1E3},function(date){return date.getUTCSeconds()}),timeMinute=newInterval(function(date){date.setTime(date-date.getMilliseconds()-1E3*date.getSeconds())},function(date,step){date.setTime(+date+6E4*step)},function(start,end){return(end-start)/6E4},function(date){return date.getMinutes()}),timeHour=newInterval(function(date){date.setTime(date-date.getMilliseconds()-1E3*date.getSeconds()-6E4*date.getMinutes())},function(date,step){date.setTime(+date+36E5*step)},function(start,end){return(end-
start)/36E5},function(date){return date.getHours()}),timeDay=newInterval(date=>date.setHours(0,0,0,0),(date,step)=>date.setDate(date.getDate()+step),(start,end)=>(end-start-6E4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/864E5,date=>date.getDate()-1),sunday=weekday$1(0);weekday$1(1);weekday$1(2);weekday$1(3);weekday$1(4);weekday$1(5);weekday$1(6);var timeMonth=newInterval(function(date){date.setDate(1);date.setHours(0,0,0,0)},function(date,step){date.setMonth(date.getMonth()+step)},function(start,
end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear())},function(date){return date.getMonth()}),year=newInterval(function(date){date.setMonth(0,1);date.setHours(0,0,0,0)},function(date,step){date.setFullYear(date.getFullYear()+step)},function(start,end){return end.getFullYear()-start.getFullYear()},function(date){return date.getFullYear()});year.every=function(k){return isFinite(k=Math.floor(k))&&0<k?newInterval(function(date){date.setFullYear(Math.floor(date.getFullYear()/
k)*k);date.setMonth(0,1);date.setHours(0,0,0,0)},function(date,step){date.setFullYear(date.getFullYear()+step*k)}):null};var utcMinute$1=newInterval(function(date){date.setUTCSeconds(0,0)},function(date,step){date.setTime(+date+6E4*step)},function(start,end){return(end-start)/6E4},function(date){return date.getUTCMinutes()}),utcHour$1=newInterval(function(date){date.setUTCMinutes(0,0,0)},function(date,step){date.setTime(+date+36E5*step)},function(start,end){return(end-start)/36E5},function(date){return date.getUTCHours()}),
utcDay$1=newInterval(function(date){date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+step)},function(start,end){return(end-start)/864E5},function(date){return date.getUTCDate()-1}),utcSunday=utcWeekday(0);utcWeekday(1);utcWeekday(2);utcWeekday(3);utcWeekday(4);utcWeekday(5);utcWeekday(6);var utcMonth$1=newInterval(function(date){date.setUTCDate(1);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCMonth(date.getUTCMonth()+step)},function(start,end){return end.getUTCMonth()-
start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear())},function(date){return date.getUTCMonth()}),utcYear=newInterval(function(date){date.setUTCMonth(0,1);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)},function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()},function(date){return date.getUTCFullYear()});utcYear.every=function(k){return isFinite(k=Math.floor(k))&&0<k?newInterval(function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/
k)*k);date.setUTCMonth(0,1);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k)}):null};var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);const t0=new Date,localGet={year:d=>d.getFullYear(),quarter:d=>Math.floor(d.getMonth()/3),month:d=>d.getMonth(),date:d=>d.getDate(),hours:d=>d.getHours(),minutes:d=>d.getMinutes(),seconds:d=>d.getSeconds(),milliseconds:d=>d.getMilliseconds(),dayofyear:d=>localDayOfYear(d),week:d=>localWeekNum(d),weekday:(d,y)=>weekday(localWeekNum(d),
d.getDay(),localYear(y).getDay()),day:(d,y)=>weekday(1,d.getDay(),localYear(y).getDay())},localInv={quarter:q=>3*q,week:(w,y)=>weekday(w,0,localYear(y).getDay())},utcGet={year:d=>d.getUTCFullYear(),quarter:d=>Math.floor(d.getUTCMonth()/3),month:d=>d.getUTCMonth(),date:d=>d.getUTCDate(),hours:d=>d.getUTCHours(),minutes:d=>d.getUTCMinutes(),seconds:d=>d.getUTCSeconds(),milliseconds:d=>d.getUTCMilliseconds(),dayofyear:d=>utcDayOfYear(d),week:d=>utcWeekNum(d),day:(d,y)=>weekday(1,d.getUTCDay(),utcFirst(y)),
weekday:(d,y)=>weekday(utcWeekNum(d),d.getUTCDay(),utcFirst(y))},utcInv={quarter:q=>3*q,week:(w,y)=>weekday(w,0,utcFirst(y))},timeIntervals={year,quarter:timeMonth.every(3),month:timeMonth,week:sunday,date:timeDay,day:timeDay,dayofyear:timeDay,hours:timeHour,minutes:timeMinute,seconds:utcSecond,milliseconds:millisecond},utcIntervals={year:utcYear,quarter:utcMonth$1.every(3),month:utcMonth$1,week:utcSunday,date:utcDay$1,day:utcDay$1,dayofyear:utcDay$1,hours:utcHour$1,minutes:utcMinute$1,seconds:utcSecond,
milliseconds:millisecond};utcSecond=6048E5;timeMinute=2592E6;const durationYear=31536E6,Milli="year month date hours minutes seconds milliseconds".split(" ");timeHour=Milli.slice(0,-1);timeMonth=timeHour.slice(0,-1);year=timeMonth.slice(0,-1);utcMinute$1=year.slice(0,-1);utcHour$1=["year","month"];const Year=["year"],intervals=[[timeHour,1,1E3],[timeHour,5,5E3],[timeHour,15,15E3],[timeHour,30,3E4],[timeMonth,1,6E4],[timeMonth,5,3E5],[timeMonth,15,9E5],[timeMonth,30,18E5],[year,1,36E5],[year,3,108E5],
[year,6,216E5],[year,12,432E5],[utcMinute$1,1,864E5],[["year","week"],1,utcSecond],[utcHour$1,1,timeMinute],[utcHour$1,3,3*timeMinute],[Year,1,durationYear]];exports.DATE="date";exports.DAY="day";exports.DAYOFYEAR="dayofyear";exports.HOURS="hours";exports.MILLISECONDS="milliseconds";exports.MINUTES="minutes";exports.MONTH="month";exports.QUARTER="quarter";exports.SECONDS="seconds";exports.TIME_UNITS=TIME_UNITS;exports.WEEK="week";exports.YEAR="year";exports.dayofyear=function(d){return localDayOfYear(new Date(d))};
exports.timeBin=function(opt){var ext=opt.extent;opt=opt.maxbins||40;var target=Math.abs(vegaUtil.span(ext))/opt;let i$jscomp$0=bisector(i=>i[2]).right(intervals,target);i$jscomp$0===intervals.length?(target=Year,ext=tickStep(ext[0]/durationYear,ext[1]/durationYear,opt)):i$jscomp$0?(i$jscomp$0=intervals[target/intervals[i$jscomp$0-1][2]<intervals[i$jscomp$0][2]/target?i$jscomp$0-1:i$jscomp$0],target=i$jscomp$0[0],ext=i$jscomp$0[1]):(target=Milli,ext=Math.max(tickStep(ext[0],ext[1],opt),1));return{units:target,
step:ext}};exports.timeFloor=function(units,step){return floor(units,step||1,localGet,localInv,localDate)};exports.timeInterval=function(unit){return timeIntervals[unit]};exports.timeOffset=function(unit,date,step){return(unit=timeIntervals[unit])?unit.offset(date,step):void 0};exports.timeSequence=function(unit,start,stop,step){return(unit=timeIntervals[unit])?unit.range(start,stop,step):void 0};exports.timeUnitSpecifier=function(units,specifiers){specifiers=vegaUtil.extend({},defaultSpecifiers,
specifiers);units=timeUnits(units);const n=units.length;let fmt="",start,end,key;for(start=0;start<n;)for(end=units.length;end>start;--end)if(key=units.slice(start,end).join("-"),null!=specifiers[key]){fmt+=specifiers[key];start=end;break}return fmt.trim()};exports.timeUnits=timeUnits;exports.utcFloor=function(units,step){return floor(units,step||1,utcGet,utcInv,utcDate)};exports.utcInterval=function(unit){return utcIntervals[unit]};exports.utcOffset=function(unit,date,step){return(unit=utcIntervals[unit])?
unit.offset(date,step):void 0};exports.utcSequence=function(unit,start,stop,step){return(unit=utcIntervals[unit])?unit.range(start,stop,step):void 0};exports.utcdayofyear=function(d){return utcDayOfYear(new Date(d))};exports.utcweek=function(d){return utcWeekNum(new Date(d))};exports.week=function(d){return localWeekNum(new Date(d))};Object.defineProperty(exports,"__esModule",{value:!0})})}
//# sourceMappingURL=module$node_modules$vega_time$build$vega_time.js.map
